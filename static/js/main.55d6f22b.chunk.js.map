{"version":3,"sources":["WithLinks.js","Show.js","Viewer.js","App.js","index.js"],"names":["tumblr_re","GfycatStore","store","JSON","parse","localStorage","getItem","e","cleanExpired","now","Date","id","expiresAt","get","_get","Object","asyncToGenerator","regenerator_default","a","mark","_callee","gfyId","resp","json","wrap","_context","prev","next","fetch","concat","sent","t0","url","gfyItem","webmUrl","getTime","setItem","stringify","abrupt","stop","this","_x","apply","arguments","Gfycat","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","pathname","substr","then","setState","catch","err","console","error","react_default","createElement","autoPlay","loop","controls","src","Component","Iframe","_this2","imgLoaded","loading","_this$props","title","restProps","objectWithoutProperties","assign","className","onLoad","frameBorder","scrolling","Img","_this3","imgErrored","alt","href","onError","style","objectFit","Strategy","_ref","host","slice","protocol","replace","test","Show_Img","Show_Gfycat","origin","match","searchParams","split","_url$pathname$match$s","_url$pathname$match$s2","slicedToArray","username","pic_id","src_base","toLowerCase","join","backgroundImage","map","ext","Show_Iframe","Show","_ref2","source","link","URL","key","flexGrow","flexShrink","padding","paddingTop","color","target","rel","Show_Strategy","LinkConsumer","Viewer","handleKeys","ctrlKey","altKey","shiftKey","metaKey","video","document","querySelector","code","requestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullScreen","webkitEnterFullScreen","bind","paused","play","pause","pos","list","links","Math","min","length","_ref3","max","keys","window","addEventListener","removeEventListener","_this$state","disabled","onClick","value","onChange","l","index","Show_Show","LinkedViewer","_Component","_class2","_getPrototypeOf2","_len","args","Array","_key","handleFile","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","files","Symbol","iterator","done","file","complete","res","reduce","b","x","_b$x","push","toConsumableArray","data","startsWith","return","inherits","createClass","backgroundColor","width","height","display","justifyContent","alignItems","type","accept","multiple","htmlFor","inp","arr","i","j","floor","random","shuffled","App","ReactDOM","render","App_App","getElementById"],"mappings":"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","file":"static/js/main.55d6f22b.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { parse } from \"papaparse\";\nimport \"./WithLinks.css\";\n\nfunction shuffled(inp) {\n  const arr = inp.slice();\n  for (let i = arr.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [arr[i], arr[j]] = [arr[j], arr[i]];\n  }\n  return arr;\n}\n\nexport default LinkConsumer =>\n  class extends Component {\n    state = {};\n\n    handleFile = e => {\n      for (let file of e.target.files) {\n        parse(file, {\n          complete: res =>\n            this.setState(state =>\n              Object.keys(state).reduce(\n                (b, x) => {\n                  if (!(x in b)) b[x] = [];\n                  b[x].push(...state[x]);\n                  return b;\n                },\n                res.data.reduce((a, [list, src]) => {\n                  if (src && src.startsWith(\"http\")) {\n                    if (!(list in a)) a[list] = [];\n                    a[list].push(src);\n                  }\n                  return a;\n                }, {})\n              )\n            )\n        });\n      }\n    };\n\n    render() {\n      if (Object.keys(this.state).length === 0) {\n        return (\n          <div\n            style={{\n              backgroundColor: \"black\",\n              width: \"100%\",\n              height: \"100%\",\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\"\n            }}\n          >\n            <div className=\"file-input-container\">\n              <h1>BFV</h1>\n              <input\n                id=\"file-input\"\n                type=\"file\"\n                accept=\".csv\"\n                onChange={this.handleFile}\n                multiple\n              />\n              <label htmlFor=\"file-input\">Choose a file</label>\n            </div>\n          </div>\n        );\n      }\n      return (\n        <LinkConsumer\n          links={Object.keys(this.state).reduce((a, x) => {\n            a[x] = shuffled(this.state[x]);\n            return a;\n          }, {})}\n        />\n      );\n    }\n  };\n","import React, { Component } from \"react\";\nimport \"./Show.css\";\n\nconst tumblr_re = /^\\d+?\\.media\\.tumblr\\.com$/;\n\nconst gfycatStoreKey = \"gfycatUrls\";\nconst GfycatStore = (() => {\n  let store;\n  try {\n    store = JSON.parse(localStorage.getItem(gfycatStoreKey) || \"{}\");\n  } catch (e) {\n    store = {};\n  }\n\n  const cleanExpired = () => {\n    const now = new Date();\n    for (const id in store) {\n      if (store[id].expiresAt <= now) delete store[id];\n    }\n  };\n\n  return {\n    get: async gfyId => {\n      cleanExpired();\n      if (!(gfyId in store)) {\n        let resp;\n        try {\n          resp = await fetch(`https://api.redgifs.com/v1/gfycats/${gfyId}`);\n        } catch (e) {\n          resp = await fetch(`https://api.gfycat.com/v1/gfycats/${gfyId}`);\n        }\n        const json = await resp.json();\n        store[gfyId] = {\n          url: json.gfyItem.webmUrl,\n          expiresAt: new Date().getTime() + 1 * 24 * 60 * 60 * 1000 // 1 day\n        };\n      }\n      localStorage.setItem(gfycatStoreKey, JSON.stringify(store));\n      return store[gfyId].url;\n    }\n  };\n})();\n\nclass Gfycat extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { webmUrl: null };\n    GfycatStore.get(props.url.pathname.substr(1))\n      .then(webmUrl => this.setState({ webmUrl }))\n      .catch(err => console.error(err));\n  }\n\n  render() {\n    return <video autoPlay loop controls src={this.state.webmUrl} />;\n  }\n}\n\nclass Iframe extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loading: true };\n  }\n\n  imgLoaded = () => this.setState({ loading: false });\n\n  render() {\n    const { src, title, ...restProps } = this.props;\n    return (\n      <iframe\n        className={this.state.loading ? \"iframe-loading\" : \"\"}\n        onLoad={this.imgLoaded}\n        title={title}\n        src={src}\n        frameBorder=\"0\"\n        scrolling=\"no\"\n        {...restProps}\n      />\n    );\n  }\n}\n\nclass Img extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loading: true, error: false };\n  }\n\n  imgLoaded = () => this.setState({ loading: false });\n\n  imgErrored = () => this.setState({ loading: false, error: true });\n\n  render() {\n    const className = this.state.loading\n      ? \"loading\"\n      : this.state.error\n      ? \"error\"\n      : \"\";\n    return (\n      <img\n        className={className}\n        alt=\"\"\n        src={this.props.url.href}\n        onLoad={this.imgLoaded}\n        onError={this.imgErrored}\n        style={{ objectFit: \"contain\" }}\n      />\n    );\n  }\n}\n\nconst Strategy = ({ url }) => {\n  let title, src;\n  switch (true) {\n    case url.host === \"i.imgur.com\":\n      if (url.pathname.slice(0, 3) === \"/a/\") {\n        title = \"imgur\";\n        src =\n          url.protocol +\n          \"//imgur.com\" +\n          url.pathname.replace(\".jpg\", \"\") +\n          \"/embed?pub=true\";\n        break;\n      }\n    // eslint-disable-next-line -- FALLTHROUGH\n    case tumblr_re.test(url.host):\n      return <Img url={url} />;\n    case url.host === \"gfycat.com\":\n      return <Gfycat url={url} />;\n    case url.host === \"www.xvideos.com\":\n      title = \"xvideos\";\n      src =\n        url.origin + \"/embedframe/\" + url.pathname.match(/\\/video(\\d+)\\//)[1];\n      break;\n    case url.host === \"www.pornhub.com\":\n      title = \"pornhub\";\n      src = url.origin + \"/embed/\" + url.searchParams.get(\"viewkey\");\n      break;\n    case url.host === \"xhamster.com\":\n      title = \"xhamster\";\n      src = url.origin + \"/embed/\" + url.pathname.split(\"/\")[2];\n      break;\n    case url.host === \"www.hentai-foundry.com\":\n      const [username, pic_id] = url.pathname\n        .match(/^\\/pictures\\/user\\/(.*)\\/(.*)\\//)\n        .slice(1);\n      const src_base = [\n        \"https://pictures.hentai-foundry.com\",\n        username[0].toLowerCase(),\n        username,\n        pic_id\n      ].join(\"/\");\n      return (\n        <div\n          className=\"img\"\n          style={{\n            backgroundImage: [\"png\", \"jpg\"]\n              .map(ext => `url(${src_base}.${ext})`)\n              .join(\",\")\n          }}\n        />\n      );\n    default:\n      title = \"default\";\n      src = url.href;\n  }\n  return <Iframe src={src} title={title} />;\n};\n\nexport default function Show({ link: source, style }) {\n  const url = new URL(source);\n  return (\n    <div key={source} className=\"item-container\" style={style}>\n      <div\n        style={{\n          flexGrow: 0,\n          flexShrink: 0,\n          padding: 5,\n          paddingTop: 0,\n          color: \"white\"\n        }}\n      >\n        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n          Source\n        </a>\n      </div>\n      <Strategy url={url} />\n    </div>\n  );\n}\n","import React, { Component } from \"react\";\nimport Show from \"./Show\";\nimport \"./Viewer.css\";\n\nexport default class Viewer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { pos: 0, list: Object.keys(props.links)[0] };\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeys);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeys);\n  }\n\n  handleKeys = e => {\n    if (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey) {\n      return;\n    }\n    const video = document.querySelector(\".item-container > video\");\n\n    switch (e.code) {\n      case \"ArrowLeft\":\n      case \"KeyA\":\n        return this.prev();\n      case \"ArrowRight\":\n      case \"KeyD\":\n        return this.next();\n      case \"KeyF\":\n        if (video) {\n          (\n            video.requestFullscreen ||\n            video.webkitRequestFullScreen ||\n            video.mozRequestFullScreen ||\n            video.msRequestFullScreen ||\n            video.webkitEnterFullScreen ||\n            (() => null)\n          ).bind(video)();\n        }\n        return;\n      case \"Space\":\n        if (video) {\n          if (video.paused) {\n            video.play();\n          } else {\n            video.pause();\n          }\n        }\n        return;\n      default:\n        return;\n    }\n  };\n\n  next = () => {\n    this.setState(({ pos, list }, { links }) => ({\n      pos: Math.min(pos + 1, links[list].length - 1)\n    }));\n  };\n\n  prev = () => {\n    this.setState(({ pos }) => ({\n      pos: Math.max(pos - 1, 0)\n    }));\n  };\n\n  render() {\n    const { pos, list } = this.state;\n    const { links } = this.props;\n    return (\n      <div className=\"viewer-container\">\n        <div className=\"button-container\">\n          <button disabled={pos === 0} onClick={this.prev}>\n            Previous\n          </button>\n          <select\n            value={list}\n            onChange={e => this.setState({ list: e.target.value })}\n          >\n            {Object.keys(links).map((l, index) => (\n              <option key={index} value={l}>{l}</option>\n            ))}\n          </select>\n          <button disabled={pos === links[list].length - 1} onClick={this.next}>\n            Next\n          </button>\n        </div>\n        <Show link={links[list][pos]} />\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport WithLinks from \"./WithLinks\";\nimport Viewer from \"./Viewer\";\n\nconst LinkedViewer = WithLinks(Viewer);\n\nexport default class App extends Component {\n  render() {\n    return <LinkedViewer />;\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}